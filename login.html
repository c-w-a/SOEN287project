<!DOCTYPE html>
<html lang = "en">
<head>
    <title> Log in </title>
    <meta charset = "utf-8"/>
    <link rel="stylesheet" href="css/styles.css">

</head>
<body>

    <div class = "container">
        <h2> Log in</h2>
    
        <form id="loginForm" onsubmit="handleLogin(event)">
        <label>
            Email Address
            <br>
            <input type = "email" id = "email" name = "email" required/>
        </label>
        <br><br>
        <label>
            Password
            <br>
            <input type = "password" id = "password" name = "password" required/>
        </label>
        <br><br>
        <input type = "submit" value = "Log in"/>
</form>
    <br>
    
       <span>Don't have an account? </span>
       <a href = "signup.html">
        Sign up
       </a>
       <br>
       <a href = "adminportal.html">
        Admin log in
       </a>

    </div>

<script>
function handleLogin(event)
{
    event.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const userArr = JSON.parse(localStorage.getItem('userArr')) || [];
            const thisUser = userArr.find(user => user.email === email && user.password === password);

    if (thisUser) 
        {
            localStorage.setItem('loggedIn', email);
            window.location.href = 'homepage.html';
        } 
    else 
        {
                alert('Invalid email or password. Please try again.')
        }
}
</script>

</body>
