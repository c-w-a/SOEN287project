<!DOCTYPE html>
<html lang = "en">
<head>
    <title> My Admin Profile </title>
    <meta charset = "utf-8"/>
    <link rel="stylesheet" href="styles.css">
</head>

<body class = "profilestyle">
<a href = "adminPortal.html">
    Go Back
</a>
<h1> Services Offered </h1>
<div class = "container">
<img src = "https://cdn1.iconfinder.com/data/icons/heroicons-solid/20/user-circle-1024.png"
        alt = "admin" width = "50" height = "50" />

        <h2><span id = "adminUser"></span></h2>
    <h3> List of Offered Services</h3>
    <div id = "service-dontainer"></div>
        </div>
        <h3>Manage</h3>
    <button onclick="addService()">Add services</button>
    <br>
    <button onclick="modifyService()">Modify service</button>
    <br>
    <button onclick="deleteService()">Delete service</button>
    </div>

    </body>
<script>
   async function loadServices(){
    try{
        const response = await fetch('/getservices');
        if(response.ok) {
            const services = await response.json();
            displayServices(services);
        } else {
            alert('Could not load services');
        }
    } catch (error) {
        console.error('Error loading services:', error);
    }
}

function displayServices(services){
    const serviceContainer = document.getElementById('service-container');
    serviceContainer.innerHTML = '';

    services.forEach(item => {
        const serviceItem = document.createElement('div');

        const serviceInput = document.createElement('input');
        serviceInput.type = 'checkbox';
        serviceInput.id = `${item.id}`;
        serviceInput.name = 'id';
        serviceInput.value = item.id;
        serviceInput.required = true;

        const serviceLabel = document.createElement('label');
        serviceLabel.htmlFor = `${item.id}`;

        serviceLabel.innerHTML = `
            <strong>${item.id}</strong><br>
            <strong>${item.name}</strong><br>
            Description: ${item.description}<br>
            Duration: ${item.duration} Minutes<br>
            Price: ${item.price}$
            <br><br>
        `;

        serviceItem.appendChild(serviceInput);
        serviceItem.appendChild(serviceLabel);

        serviceContainer.appendChild(serviceItem);
    });

}

    function addService() {

        window.location.href = 'adminServices.html'
    }

    //TO MODIFY SERVICES, DOES NOT WORK YET
    // function modifyService() {
    //     const selected = document.querySelector('input[name="id"]:checked').value; //SOURCE FOR THIS **QUERY SELECTOR

    //     if (selected) {
    //      window.location.href = 'adminModifyServices.html'
    //     }

    //     }

    //TO DELETE SERVICES, DOES NOT WORK YET
    // async function deleteService(){
    //     const selected = document.querySelector('input[name="id"]:checked').value; //SOURCE FOR THIS **QUERY SELECTOR

    //     if (selected) {
    //         const id = [1];
    //         if (confirm('sure you want to delete this service?')) {
    //             try {
    //                 const response = await fetch('/services', {
    //                     method: 'DELETE',

    //                 });

    //                 if (response.ok) {
    //                     alert('service deleted successfully');
    //                 } else {
    //                     alert('failed to delete service');
    //                 }
    //             } catch (error) {
    //                 console.error('error service profile:', error);
    //                 alert('an error occurred while deleting the service.');
    //             }
    //         }

    //     }
    // }
    
    window.onload = loadServices;
 
</script>
</html>
