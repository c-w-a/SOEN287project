<!DOCTYPE html>
<html lang = "en">
<head>
    <title> My Admin Profile </title>
    <meta charset = "utf-8"/>
    <link rel="stylesheet" href="styles.css">
</head>
    
<body class = "profilestyle">
    <a href = "adminEditBusiness.html">
     Go Back
    </a>
    <h1> Edit Business Info</h1>
    <div class = "profilestyle">
        <img src = "https://cdn1.iconfinder.com/data/icons/heroicons-solid/20/user-circle-1024.png"
            alt = "admin" width = "55" height = "50" />
        <h2><span id = "adminUser"></span></h2>
        <hr>
        <h3> Business Details </h3>
        
        <form action = "adminEditProfile" onsubmit = "handleSubmit(event)">

            <div>
                <label for="businessName"> Business Name: 
                    <br> 
                <input type="text" id ="businessName" name = "businessName" placeholder="Business Name"> 
            </label>
            </div>

            <div>
                <label for="businessSlogan"> Business Slogan: 
                    <br>
                <input type="text" id ="businessSlogan" name = "businessSlogan" placeholder="Business Slogan">
            </label>
            </div>

            <div>
                <label for="businessEmail"> Business Email: 
                    <br>
                <input type="text" id ="businessEmail" name = "businessEmail" placeholder="Business Email">
            </label>
            </div>

            <div>
                <label for="businessPhone"> Business Phone Number: 
                    <br>
                <input type="text" id ="businessPhone" name = "businessPhone" placeholder="Business Phone Number">
            </label>
            </div>

            <div>
                <label for="businessAddress"> Business Address: 
                    <br>
                <input type="text" id ="businessAddress" name = "businessAddress" placeholder="Business Address">
            </label>
            </div>

            <br>

            <div>
                <input type="reset">
            </div>

            <div>
                <input type="submit">
            </div>
        </form>


    </div>

    <script>
        async function handleSubmit(event) {
            event.preventDefault();

            const businessName = document.getElementById('businessName').value;
            const businessSlogan = document.getElementById('businessSlogan').value;
            const emailAddress = document.getElementById('businessEmail').value;
            const phoneNumber = document.getElementById('businessPhone').value;
            const physicalAddress= document.getElementById('businessAddress').value;

            try {
                const response = await fetch('/business-info', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: new URLSearchParams({ businessName, businessSlogan, emailAddress, phoneNumber, physicalAddress }),
                });

                if (response.ok) {
                    const result = await response.text();
                    alert(result);
                    window.location.href = 'adminEditBusiness.html';
                } else {
                    const error = await response.text();
                    alert(error);
                }
            } catch (error) {
                console.error('error during modification of profile:', error);
                alert('error occurred.. please try again later..');
            }
        }
    </script>

</body>
</html>
